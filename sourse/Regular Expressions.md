# Regular Expressions

정규 표현식에서 사용하는 메타 문자(meta characters)에는 다음과 같은 것이 있다.

※ 메타 문자란 원래 그 문자가 가진 뜻이 아닌 특별한 용도로 사용하는 문자를 말한다.

```
. ^ $ * + ? { } [ ] \ | ( )
```

정규 표현식에 위 메타 문자를 사용하면 특별한 의미를 갖게 된다.



### 문자 클래스 [ ]

문자 클래스로 만들어진 정규식은 `"[ ] 사이의 문자들과 매치"`라는 의미를 갖는다.

※ 문자 클래스를 만드는 메타 문자인 [ ] 사이에는 어떤 문자도 들어갈 수 있다.

즉 정규 표현식이 [abc]라면 이 표현식의 의미는 "a, b, c 중 한 개의 문자와 매치"를 뜻한다.  

- ```
    [a, b, c]
  - a"는 정규식과 일치하는 문자인 "a"가 있으므로 매치
  - "before"는 정규식과 일치하는 문자인 "b"가 있으므로 매치
  - "dude"는 정규식과 일치하는 문자인 a, b, c 중 어느 하나도 포함하고 있지 않으므로 매치되지 않음
  ```

  

  [ ] 안의 두 문자 사이에 하이픈(-)을 사용하면 두 문자 사이의 범위(From - To)를 의미한다.

- ```
  - [a-zA-Z] : 알파벳 모두
  - [0-9] : 숫자
  ```



### Dot(.)

정규 표현식의 Dot(.) 메타 문자는 줄바꿈 문자인 `\n`을 제외한 모든 문자와 매치됨을 의미한다.

```
a.b
```

위 정규식은 "a + 모든문자 + b" 와 같은 의미다.

즉 a와 b라는 문자 사이에 어떤 문자가 들어가도 모두 매치된다는 의미이다.



```
- "aab"는 가운데 문자 "a"가 모든 문자를 의미하는 .과 일치하므로 정규식과 매치된다.
- "a0b"는 가운데 문자 "0"가 모든 문자를 의미하는 .과 일치하므로 정규식과 매치된다.
- "abc"는 "a"문자와 "b"문자 사이에 어떤 문자라도 하나는있어야 하는 이 정규식과 일치하지 않으므로 매치되지 않는다.
```



### 반복 (*)

```
ca*t
```

이 정규식에는 반복을 의미하는 `*`메타 문자가 사용되었다.  `*` 바로 앞에 있는 문자 a가 0부터 무한대로 반복될 수 있다는 의미다.



| 정규식 | 문자열 | Match 여부 | 설명                    |
| ------ | ------ | ---------- | ----------------------- |
| ca*t   | ct     | Yes        | "a"가 0번 반복되어 매치 |
| ca*t   | cat    | Yes        | "a"가 1번 반복되어 매치 |
| ca*t   | caaat  | Yes        | "a"가 3번 반복되어 매치 |



### 반복 (+)

반복을 나타내는 또 다른 메타 문자로 `+`가 있다.  `+`는 최소 1번 이상 반복될 때 사용한다. 즉 `*`가 반복 횟수 0부터라면 `+`는 반복 횟수 1부터인 것이다.

```
ca+t
```

위 정규식은 "c + a(1번 이상 반복) + t"와 같다.

| 정규식 | 문자열 | Match 여부 | 설명                             |
| ------ | ------ | ---------- | -------------------------------- |
| ca*t   | ct     | No         | "a"가 0번 반복되어 매치되지 않음 |
| ca*t   | cat    | Yes        | "a"가 1번 반복되어 매치          |
| ca*t   | caaat  | Yes        | "a"가 3번 반복되어 매치          |

#### 1.{m}

```
ca{2}t
```

위 정규식은 "c + a(반드시 2번 반복) + t"와 같은 의미다.

| 정규식 | 문자열 | Match 여부 | 설명                             |
| ------ | ------ | ---------- | -------------------------------- |
| ca{2}t | cat    | No         | "a"가 1번 반복되어 매치되지 않음 |
| ca{2}t | caat   | Yes        | "a"가 2번 반복되어 매치          |



#### 2.{m, n}

```
ca{2, 5}t
```

위 정규식은 "c + a(2~5회 반복) + t"와 같다

| 정규식   | 문자열  | Match 여부 | 설명                               |
| -------- | ------- | ---------- | ---------------------------------- |
| ca{2,5}t | cat     | No         | "a"가 1번만 반복되어 매치되지 않음 |
| ca{2,5}t | caat    | Yes        | "a"가 2번 반복되어 매치            |
| ca{2,5}t | caaaaat | Yes        | "a"가 5번 반복되어 매치            |



#### 3.?

```
ab?c
```

위 정규식은 "a + b(있어도 되고 없어도 된다) + c"와 같은 의미다.

| 정규식 | 문자열 | Match 여부 | 설명                    |
| ------ | ------ | ---------- | ----------------------- |
| ab?c   | abc    | Yes        | "b"가 1번 사용되어 매치 |
| ab?c   | ac     | Yes        | "b"가 0번 사용되어 매치 |

즉 b문자가 있거나 없거나 둘 다 매치되는 경우이다.



### 파이썬에서 정규 표현식을 지원하는 re 모듈

파이썬은 정규 표현식을 지원하기 위해 re(regular expression의 약어) 모듈을 제공한다.



```
import re
p = re.compile('ab*')
```

re.compile을 사용하여 정규 표현식(위 예에서는 `ab*`)을 컴파일한다.



## 정규식을 이용한 문자열 검색



| Method     | 목적                                                         |
| ---------- | ------------------------------------------------------------ |
| match()    | 문자열의 처음부터 정규식과 매치되는지 조사한다.              |
| search()   | 문자열 전체를 검색하여 정규식와 매치되는지 조사한다.         |
| findall()  | 정규식과 매치되는 모든 문자열을 리스트로 돌려준다.           |
| finditer() | 정규식과 매치되는 모든 문자열을 반복 가능한 객체로 돌려준다. |



###  1.match

```
import re
p = re.compile('[a-z]+')
m = p.match("python")
print(m)
-> <_sre.SRE_Match object at 0x01F3F9F8>
```

"python" 문자열은 `[a-z]+` 정규식에 부합되므로 match 객체를 돌려준다.

```
m = re.match('정규표현식', 문자열 소스)
m = re.match(r'패턴 문자열', '문자열') 
```



```
m = p.match("3 python")
print(m)
-> None
```

"3 python" 문자열은 처음에 나오는 문자 3이 정규식 `[a-z]+`에 부합되지 않으므로 None을 돌려준다.



```
a = 'penpineapple'
b = 'applepen'
c = 'pen'
m = re.match(r'^pen$', c)
print(m)
-> pen
```

 시작하는 문자가 "pen"이며 "pen"으로 끝나는 문자를 매칭해라라는 의미이다.



## 2.search

```
m = p.search("3 python")
print(m)
-> <_sre.SRE_Match object at 0x01F3FA68>
```

"python" 문자열에 search 메서드를 수행하면 match 메서드를 수행했을 때와 동일하게 매치된다.

"3 python" 문자열의 첫 번째 문자는 "3"이지만 search는 문자열의 처음부터 검색하는 것이 아니라 문자열 전체를 검색하기 때문에 "3 " 이후의 "python" 문자열과 매치된다.



## 3.findall

```
result= p.findall("life is too short")
print(result)
-> ['life', 'is', 'too', 'short']
```

"life is too short" 문자열의 'life', 'is', 'too', 'short' 단어를 각각 `[a-z]+` 정규식과 매치해서 리스트로 돌려준다.



## match 객체의 메서드



| method  | 목적                                                  |
| ------- | ----------------------------------------------------- |
| group() | 매치된 문자열을 돌려준다.                             |
| start() | 매치된 문자열의 시작 위치를 돌려준다.                 |
| end()   | 매치된 문자열의 끝 위치를 돌려준다.                   |
| span()  | 매치된 문자열의 (시작,끝)에 해당하는 튜플을 돌려준다. |

```
m = p.match("python")
m.group()
-> 'python'

m.start()
-> 0

m.end()
-> 6

m.span()
-> (0, 6)
```

